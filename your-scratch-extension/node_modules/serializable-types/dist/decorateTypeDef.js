"use strict";

var assertType = require("./assertType");

module.exports = function decorateTypeDef(typeDef) {
  return {
    description: typeDef.description,
    serializedDescription: typeDef.serializedDescription,
    check: typeDef.check,
    serialize: function serialize(val) {
      if (!this.check(val)) {
        throw assertType.makeError(typeDef.description, val);
      }

      return typeDef.serialize(val);
    },
    checkSerialized: typeDef.checkSerialized,
    deserialize: function deserialize(serialized) {
      if (!this.checkSerialized(serialized)) {
        throw assertType.makeError(typeDef.serializedDescription, serialized);
      }

      return typeDef.deserialize(serialized);
    },
    assert: function assert(val) {
      assertType(val, typeDef);
    }
  };
};