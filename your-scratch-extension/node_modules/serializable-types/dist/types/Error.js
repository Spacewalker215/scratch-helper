"use strict";

var decorateTypeDef = require("../decorateTypeDef");

module.exports = decorateTypeDef({
  description: "Error",
  serializedDescription: '{ $type: "Error", $value: { name: string, message: string, stack: string } }',
  check: function check(val) {
    return val instanceof Error;
  },
  serialize: function serialize(error) {
    return {
      $type: "Error",
      $value: {
        name: error.name,
        message: error.message,
        stack: error.stack
      }
    };
  },
  checkSerialized: function checkSerialized(serialized) {
    return serialized.$type === "Error";
  },
  deserialize: function deserialize(serialized) {
    var error = new Error(serialized.$value.message);
    Object.defineProperty(error, "name", {
      value: serialized.$value.name
    });
    Object.defineProperty(error, "stack", {
      value: serialized.$value.stack
    });
    return error;
  }
});