"use strict";

var decorateTypeDef = require("../decorateTypeDef");

var Buffer = require("buffer").Buffer;

module.exports = decorateTypeDef({
  description: "Buffer",
  serializedDescription: '{ $type: "Buffer", $value: Array<number> }',
  check: function check(val) {
    return Buffer.isBuffer(val);
  },
  serialize: function serialize(buffer) {
    return {
      $type: "Buffer",
      $value: Array.from(buffer.values())
    };
  },
  checkSerialized: function checkSerialized(serialized) {
    return serialized.$type === "Buffer";
  },
  deserialize: function deserialize(serialized) {
    return Buffer.from(serialized.$value);
  }
});