"use strict";

var decorateTypeDef = require("../decorateTypeDef");

module.exports = decorateTypeDef({
  description: "RegExp",
  serializedDescription: '{ $type: "RegExp", $value: { pattern: string, flags: string } }',
  check: function check(val) {
    return val instanceof RegExp;
  },
  serialize: function serialize(regexp) {
    return {
      $type: "RegExp",
      $value: {
        pattern: regexp.source,
        flags: regexp.flags
      }
    };
  },
  checkSerialized: function checkSerialized(serialized) {
    return serialized.$type === "RegExp";
  },
  deserialize: function deserialize(serialized) {
    return new RegExp(serialized.$value.pattern, serialized.$value.flags);
  }
});