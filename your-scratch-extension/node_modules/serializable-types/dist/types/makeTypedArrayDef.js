"use strict";

var decorateTypeDef = require("../decorateTypeDef");

module.exports = function makeTypedArrayDef(klass) {
  return decorateTypeDef({
    description: klass.name,
    serializedDescription: "{ $type: \"".concat(klass.name, "\", $value: Array<number> }"),
    check: function check(val) {
      return val instanceof klass;
    },
    serialize: function serialize(typedArray) {
      return {
        $type: klass.name,
        $value: Array.from(typedArray)
      };
    },
    checkSerialized: function checkSerialized(serialized) {
      return serialized.$type === klass.name;
    },
    deserialize: function deserialize(serialized) {
      return new klass(serialized.$value);
    }
  });
};