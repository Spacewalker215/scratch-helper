"use strict";

var uid = require("uid");


module.exports = function createCreateSocketUrl(requestUrl, socketRegistry) {
  return function createSocketUrl(handler) {
    var socketId = uid(15);
    socketRegistry.set(socketId, handler);
    var protocol = "ws:";
    if (requestUrl.protocol === "https:") {
      protocol = "wss:";
    }
    return protocol + "//" + requestUrl.host + "/" + socketId;
  };
};